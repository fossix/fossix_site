{% extends 'base.html' %}

{% from 'utils.html' import print_author, tag_detail %}

{% set pagetitle=content.title %}

{% block content %}
<div class="contenthead">
  By
  {% if content.author %}
  <a href="#">{{ print_author(content.author) }}</a>
  {% else %}
  Anonymous
  {% endif %}
  on
  {{ content.get_create_date() }} {% if g.user.is_authenticated() and g.user.is_editor(content) %}
  <a href="{{ url_for('content.EditView:get', id=content.id) }}" id="edit">
    <button class="btn btn-mini"><i class="icon-edit"> </i></button></a>
  {% endif %}
  <span class="badge badge-inverse pull-right" id="likecount">{{content.like_count}}</span>
  <a href="{{ url_for('content.ContentView:like', id=content.id) }}" class="pull-right" id="like">
    <button class="btn btn-mini"><i class="icon-thumbs-up"> </i>Like</button>
  </a>
</div>

<div class="content-body">
  {{ content.content | markdown }}
</div>

<div class="span12">
<div class="taglist pull-left">
  {% for t in content.tags %}
    {{ tag_detail(t) }}
  {% endfor %}
</div>

{% if g.user.is_authenticated() %}
<div class="read-count pull-right">
  Number of reads: {{ content.read_count }}
</div>
{% endif %}
</div>

<div class="span12">
<div class="pull-right">
{% if content.version > 1 %}
<a href="#" data-toggle="tooltip" class="tip"
   title="Version {{content.version}}: {{content.edit_summary}}">
  Modified {{content.modified_date | relative_now}} ago
</a>
by
  {{ print_author(content.author) }}
{% endif %}
</div>
</div>
{% endblock %}
